// Compiled by ClojureScript 0.0-2138
goog.provide('touhou_barrage_fighters.storage');
goog.require('cljs.core');
goog.require('touhou_barrage_fighters.data');
goog.require('goog.net.cookies');
goog.require('goog.net.cookies');
goog.require('touhou_barrage_fighters.data');
touhou_barrage_fighters.storage.character__GT_js = (function character__GT_js(chara){return cljs.core.clj__GT_js.call(null,cljs.core.PersistentHashMap.fromArrays([new cljs.core.Keyword(null,"img","img",1014008629),new cljs.core.Keyword(null,"words","words",1127222811),new cljs.core.Keyword(null,"m-attack","m-attack",1877370650),new cljs.core.Keyword(null,"p-attack","p-attack",2810834359),new cljs.core.Keyword(null,"equipment","equipment",2090260736),new cljs.core.Keyword(null,"cards","cards",1108335317),new cljs.core.Keyword(null,"hp","hp",1013907578),new cljs.core.Keyword(null,"job","job",1014009647),new cljs.core.Keyword(null,"exp","exp",1014005135),new cljs.core.Keyword(null,"level","level",1116770038),new cljs.core.Keyword(null,"m-defence","m-defence",4231833186),new cljs.core.Keyword(null,"p-defence","p-defence",3104437093)],[new cljs.core.Keyword(null,"img","img",1014008629).cljs$core$IFn$_invoke$arity$1(chara),new cljs.core.PersistentArrayMap(null, 5, [new cljs.core.Keyword(null,"get","get",1014006472),new cljs.core.Keyword(null,"get","get",1014006472).cljs$core$IFn$_invoke$arity$1(new cljs.core.Keyword(null,"words","words",1127222811).cljs$core$IFn$_invoke$arity$1(chara)),new cljs.core.Keyword(null,"in-temple","in-temple",3345930599),new cljs.core.Keyword(null,"in-temple","in-temple",3345930599).cljs$core$IFn$_invoke$arity$1(new cljs.core.Keyword(null,"words","words",1127222811).cljs$core$IFn$_invoke$arity$1(chara)),new cljs.core.Keyword(null,"attack","attack",3901612474),new cljs.core.Keyword(null,"attack","attack",3901612474).cljs$core$IFn$_invoke$arity$1(new cljs.core.Keyword(null,"words","words",1127222811).cljs$core$IFn$_invoke$arity$1(chara)),new cljs.core.Keyword(null,"damage","damage",3969744609),new cljs.core.Keyword(null,"damage","damage",3969744609).cljs$core$IFn$_invoke$arity$1(new cljs.core.Keyword(null,"words","words",1127222811).cljs$core$IFn$_invoke$arity$1(chara)),new cljs.core.Keyword(null,"selected","selected",2205476365),new cljs.core.Keyword(null,"selected","selected",2205476365).cljs$core$IFn$_invoke$arity$1(new cljs.core.Keyword(null,"words","words",1127222811).cljs$core$IFn$_invoke$arity$1(chara))], null),new cljs.core.Keyword(null,"m-attack","m-attack",1877370650).cljs$core$IFn$_invoke$arity$1(chara),new cljs.core.Keyword(null,"p-attack","p-attack",2810834359).cljs$core$IFn$_invoke$arity$1(chara),new cljs.core.Keyword(null,"equipment","equipment",2090260736).cljs$core$IFn$_invoke$arity$1(chara),new cljs.core.Keyword(null,"cards","cards",1108335317).cljs$core$IFn$_invoke$arity$1(chara),new cljs.core.Keyword(null,"hp","hp",1013907578).cljs$core$IFn$_invoke$arity$1(chara),new cljs.core.Keyword(null,"job","job",1014009647).cljs$core$IFn$_invoke$arity$1(chara),new cljs.core.Keyword(null,"exp","exp",1014005135).cljs$core$IFn$_invoke$arity$1(chara),new cljs.core.Keyword(null,"level","level",1116770038).cljs$core$IFn$_invoke$arity$1(chara),new cljs.core.Keyword(null,"m-defence","m-defence",4231833186).cljs$core$IFn$_invoke$arity$1(chara),new cljs.core.Keyword(null,"p-defence","p-defence",3104437093).cljs$core$IFn$_invoke$arity$1(chara)]));
});
touhou_barrage_fighters.storage.character_repair = (function character_repair(chara){return touhou_barrage_fighters.data.__GT_Character.call(null,touhou_barrage_fighters.data.__GT_Word.call(null,new cljs.core.Keyword(null,"get","get",1014006472).cljs$core$IFn$_invoke$arity$1(new cljs.core.Keyword(null,"words","words",1127222811).cljs$core$IFn$_invoke$arity$1(chara)),new cljs.core.Keyword(null,"in-temple","in-temple",3345930599).cljs$core$IFn$_invoke$arity$1(new cljs.core.Keyword(null,"words","words",1127222811).cljs$core$IFn$_invoke$arity$1(chara)),new cljs.core.Keyword(null,"attack","attack",3901612474).cljs$core$IFn$_invoke$arity$1(new cljs.core.Keyword(null,"words","words",1127222811).cljs$core$IFn$_invoke$arity$1(chara)),new cljs.core.Keyword(null,"damage","damage",3969744609).cljs$core$IFn$_invoke$arity$1(new cljs.core.Keyword(null,"words","words",1127222811).cljs$core$IFn$_invoke$arity$1(chara)),new cljs.core.Keyword(null,"selected","selected",2205476365).cljs$core$IFn$_invoke$arity$1(new cljs.core.Keyword(null,"words","words",1127222811).cljs$core$IFn$_invoke$arity$1(chara))),new cljs.core.Keyword(null,"hp","hp",1013907578).cljs$core$IFn$_invoke$arity$1(chara),new cljs.core.Keyword(null,"p-attack","p-attack",2810834359).cljs$core$IFn$_invoke$arity$1(chara),new cljs.core.Keyword(null,"m-attack","m-attack",1877370650).cljs$core$IFn$_invoke$arity$1(chara),new cljs.core.Keyword(null,"p-defence","p-defence",3104437093).cljs$core$IFn$_invoke$arity$1(chara),new cljs.core.Keyword(null,"m-defence","m-defence",4231833186).cljs$core$IFn$_invoke$arity$1(chara),cljs.core.keyword.call(null,chara.call(null,new cljs.core.Keyword(null,"job","job",1014009647))),chara.call(null,new cljs.core.Keyword(null,"cards","cards",1108335317)),cljs.core.keyword.call(null,chara.call(null,new cljs.core.Keyword(null,"equipment","equipment",2090260736))),chara.call(null,new cljs.core.Keyword(null,"level","level",1116770038)),chara.call(null,new cljs.core.Keyword(null,"exp","exp",1014005135)),chara.call(null,new cljs.core.Keyword(null,"img","img",1014008629)));
});
touhou_barrage_fighters.storage.save = (function save(player){var member = cljs.core.map.call(null,touhou_barrage_fighters.storage.character__GT_js,new cljs.core.Keyword(null,"member","member",4231101964).cljs$core$IFn$_invoke$arity$1(player));var cards = cljs.core.clj__GT_js.call(null,new cljs.core.Keyword(null,"cards","cards",1108335317).cljs$core$IFn$_invoke$arity$1(player));return goog.net.cookies.set("player",escape(JSON.stringify(cljs.core.clj__GT_js.call(null,new cljs.core.PersistentArrayMap(null, 6, [new cljs.core.Keyword(null,"name","name",1017277949),new cljs.core.Keyword(null,"name","name",1017277949).cljs$core$IFn$_invoke$arity$1(player),new cljs.core.Keyword(null,"pass","pass",1017337731),new cljs.core.Keyword(null,"pass","pass",1017337731).cljs$core$IFn$_invoke$arity$1(player),new cljs.core.Keyword(null,"lv","lv",1013907708),new cljs.core.Keyword(null,"lv","lv",1013907708).cljs$core$IFn$_invoke$arity$1(player),new cljs.core.Keyword(null,"cards","cards",1108335317),cards,new cljs.core.Keyword(null,"member","member",4231101964),member,new cljs.core.Keyword(null,"main","main",1017248043),new cljs.core.Keyword(null,"main","main",1017248043).cljs$core$IFn$_invoke$arity$1(player)], null)))));
});
goog.exportSymbol('touhou_barrage_fighters.storage.save', touhou_barrage_fighters.storage.save);
touhou_barrage_fighters.storage.load = (function load(){var player_map = cljs.core.js__GT_clj.call(null,JSON.parse(unescape(goog.net.cookies.get("player"))),new cljs.core.Keyword(null,"keywordize-keys","keywordize-keys",4191781672),true);var member = cljs.core.vec.call(null,cljs.core.map.call(null,touhou_barrage_fighters.storage.character_repair,player_map.call(null,new cljs.core.Keyword(null,"member","member",4231101964))));var name = player_map.call(null,new cljs.core.Keyword(null,"name","name",1017277949));var pass = player_map.call(null,new cljs.core.Keyword(null,"pass","pass",1017337731));var lv = player_map.call(null,new cljs.core.Keyword(null,"lv","lv",1013907708));var cards = player_map.call(null,new cljs.core.Keyword(null,"cards","cards",1108335317));var main = player_map.call(null,new cljs.core.Keyword(null,"main","main",1017248043));return cljs.core.reset_BANG_.call(null,touhou_barrage_fighters.data.player,touhou_barrage_fighters.data.__GT_Player.call(null,name,pass,lv,cards,member,main));
});
goog.exportSymbol('touhou_barrage_fighters.storage.load', touhou_barrage_fighters.storage.load);
